2011.05.28.15.55.47

Задача 2. А обработка ошибок?

Задача 4.(-1). Условие num_b >= 0 почему принимается за ошибку? Разве не
наоборот? И ещё учтите, что когда чтение файла дошло до конца, то read
возвращает 0.

Задача 3. Копирование - это плохо. И критическая секция, в которой стоит
вывод на экран - это ещё хуже. Потому что с медленным терминалом нарушает
требование: проводить расчёт раз в секунду. Копирование же ненужным
способом удлиняет время самого расчёта, что тоже уменьшает вероятность его
осуществления ровно раз в секунду.

Задача 5.(+1). Не работает.

	$ gcc -O3 -D_GNU_SOURCE dekker.c -lpthread -o dkr && ./dkr 
	dekker.c: In function ‘thread_counter’:
	dekker.c:50:12: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]
	19997816

Явно в итоге получается не 2 * COUNT. Призываю Вас задуматься над тем, зачем
вообще нужен mfence.
